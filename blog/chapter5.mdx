---
slug: 05-makeing-good-use-of-types
title: 5ì¥. íƒ€ì… í™œìš©í•˜ê¸°
authors: [hotbreakb]
tags: [extends, infer, NonNullable, ReturnType, Record]
---

### extendsì™€ ì œë„ˆë¦­ì„ í™œìš©í•œ ì¡°ê±´ë¶€ íƒ€ì…

**ğŸ” ë‚´ìš© (151ìª½)**

- `PayMethod` íƒ€ì…ì€ ì œë„ˆë¦­ íƒ€ì…ìœ¼ë¡œ `extends`ë¥¼ ì‚¬ìš©í•œ ì¡°ê±´ë¶€ íƒ€ì…ì´ë‹¤.

```ts
type PayMethod<T> = T extends "card" ? Card : Bank;
```

**ğŸ‰ ì´ë ‡ê²Œ ê°œì„ í•˜ë©´ ì–´ë–¨ê¹Œìš”?**

```ts
// ì „
export type PointInfo = {
  saleAmount: number;
  saleProducts: string;
  saleType: SaleType;
  savePoint: number;
  saveStamp: number;
  type: string;
  usePoint: number;
  useStamp: number;
  visitedAt: string;
};

// í›„
type SaleType = "point" | "stamp";

type BasePointInfo<T extends SaleType> = {
  saleAmount: number;
  saleProducts: string;
  saleType: T;
  visitedAt: string;
};

type PointInfoExtended<T extends SaleType> = BasePointInfo<T> & {
  type: T;
  savePoint: T extends "point" ? number : 0;
  usePoint: T extends "point" ? number : 0;
  saveStamp: T extends "stamp" ? number : 0;
  useStamp: T extends "stamp" ? number : 0;
};

// point íƒ€ì…ì˜ ì˜ˆì‹œ
const pointInfo: PointInfoExtended<"point"> = {
  saleAmount: 100,
  saleProducts: "Product A",
  saleType: "point",
  savePoint: 10,
  usePoint: 20,
  saveStamp: 0,
  useStamp: 0,
  type: "point",
  visitedAt: "2024-03-14",
};
```

### inferë¥¼ í™œìš©í•´ì„œ íƒ€ì… ì¶”ë¡ í•˜ê¸°

**ğŸ” ë‚´ìš© (156ìª½)**

- `extends`ë¥¼ ì‚¬ìš©í•  ë•Œ `infer` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. `infer`ëŠ” 'ì¶”ë¡ í•˜ë‹¤'ë¼ëŠ” ì˜ë¯¸ë¥¼ ì§€ë‹ˆê³  ìˆëŠ”ë° íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ ë‹¨ì–´ ì˜ë¯¸ì²˜ëŸ¼ íƒ€ì…ì„ ì¶”ë¡ í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

**ğŸ‰ ì˜ˆì‹œ**

```ts
type ReturnType<T extends (...args: any) => any> = T extends (
  ...args: any
) => infer R
  ? R
  : any;
```

    í•¨ìˆ˜ ë¦¬í„´ íƒ€ì…ì´ ìˆì–´? ìˆìœ¼ë©´ ê·¸ê±°, ì—†ìœ¼ë©´ `any`

**ğŸ” ë‚´ìš© (159ìª½)**

- `menuList`ì—ì„œ `subMenus`ê°€ ì—†ëŠ” `MainMenu`ì˜ `name`ê³¼ `subMenus`ì—ì„œ ì“°ì´ëŠ” `name`, `route name`ì— ë™ì¼í•œ ë¬¸ìì—´ë§Œ ì…ë ¥í•´ì•¼ í•œë‹¤ëŠ” ì œì•½ì´ ì¡´ì¬í•œë‹¤.
  - ì½”ë“œë¡œ ì‘ì„±í•´ë³´ì•˜ì„ ë•Œ ì•„ë¬´ ë¬¸ì œê°€ ì•ˆ ìƒê¸°ëŠ”ë°, ì—¬ê¸°ì„œ ì–´ë–¤ ì œì•½ì´ ìˆë‹¤ê³  í•˜ëŠ” ê±¸ê¹Œìš”?

### PickOne ì»¤ìŠ¤í…€ ìœ í‹¸ë¦¬í‹° íƒ€ì… êµ¬í˜„í•˜ê¸°

**ğŸ” ë‚´ìš© (168ìª½)**

- ì˜µì…”ë„ + `undefined`ë¡œ íƒ€ì…ì„ ì§€ì •í•˜ë©´ ì‚¬ìš©ìê°€ ì˜ë„ì ìœ¼ë¡œ `undefined` ê°’ì„ ë„£ì§€ ì•ŠëŠ” ì´ìƒ, ì›ì¹˜ ì•ŠëŠ” ì†ì„±ì— ê°’ì„ ë„£ì—ˆì„ ë•Œ íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí•  ê²ƒì´ë‹¤.

```ts
{ account: string; card?: undefined} | { account?: undefined; card: string}
```

### Promise.allì„ ì‚¬ìš©í•  ë•Œ NonNullable ì ìš©í•˜ê¸°

**ğŸ” ë‚´ìš© (172ìª½)**

- `Array<AdCampaign[] | null>`ë¡œ ì¶”ë¡ ëœë‹¤. `NonNullable`ì„ ì‚¬ìš©í•´ì„œ í•„í„°ë§í•˜ë©´ `Array<AdCampaign[]>`ë¡œ ì¶”ë¡ í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

### ë¬´í•œí•œ í‚¤ë¥¼ ì§‘í•©ìœ¼ë¡œ ê°€ì§€ëŠ” Record

**ğŸ” ë‚´ìš© (179ìª½)**

```ts
type Category = string;
const foodByCategory: Record<Category, Food[]> = {
  í•œì‹: [{ name: "ì œìœ¡ë®ë°¥" }, { name: "ì½©ë‚˜ë¬¼êµ­ë°¥" }],
  ì¼ì‹: [{ name: "íšŒ", name: "í…ë™" }],
};

foodByCategory["ì–‘ì‹"].map((food) => food.name); // ëŸ°íƒ€ì„ì—ì„œ undefinedê°€ ë˜ì–´ ì˜¤ë¥˜ ë°˜í™˜
```

```ts
type PartialRecord<K extends string, T> = Partial<Record<K, T>>;

const foodByCategory: PartialRecord<Category, Food[]> = {
  í•œì‹: [{ name: "ì œìœ¡ë®ë°¥" }, { name: "ì½©ë‚˜ë¬¼êµ­ë°¥" }],
  ì¼ì‹: [{ name: "íšŒ", name: "í…ë™" }],
};

foodByCategory["ì–‘ì‹"].map((food) => food.name); // Object is possibly `undefined`
```
